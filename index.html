<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Satria Developer ğŸ’»</title>
<style>
  :root {
    --bg-dark: #0e0e0e;
    --bg-light: #1a1a1a;
    --text-light: #f2f2f2;
    --bubble-user: linear-gradient(135deg, #ffffff, #dcdcdc);
    --bubble-bot: #242424;
  }
  * { box-sizing: border-box; }
  html, body {
    margin: 0; padding: 0;
    height: 100%; width: 100%;
    overflow-x: hidden;
    background: var(--bg-dark);
    color: var(--text-light);
    font-family: "Poppins", sans-serif;
    display: flex; flex-direction: column;
  }
  header {
    text-align: center;
    padding: 14px 10px;
    background: var(--bg-light);
    border-bottom: 1px solid #2f2f2f;
    font-weight: 600;
  }
  .chat-box {
    flex: 1;
    overflow-y: auto;
    padding: 18px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  .msg {
    padding: 12px 16px;
    border-radius: 14px;
    max-width: 85%;
    line-height: 1.5;
    word-wrap: break-word;
    opacity: 0;
    transform: translateY(10px);
    animation: fadeSlideIn 0.4s ease forwards;
  }
  .user { align-self: flex-end; background: var(--bubble-user); color: #000; }
  .bot { align-self: flex-start; background: var(--bubble-bot); color: var(--text-light); }
  .input-area {
<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
<title>Satria Developer ğŸ’»</title>
<style>
  :root {
    --bg-dark: #0e0e0e;
    --bg-light: #1a1a1a;
    --text-light: #f2f2f2;
    --bubble-user: linear-gradient(135deg, #ffffff, #dcdcdc);
    --bubble-bot: #242424;
  }
  * { box-sizing: border-box; }
  html, body {
    margin: 0; padding: 0;
    height: 100%; width: 100%;
    overflow-x: hidden;
    background: var(--bg-dark);
    color: var(--text-light);
    font-family: "Poppins", sans-serif;
    display: flex; flex-direction: column;
  }
  header {
    text-align: center;
    padding: 14px 10px;
    background: var(--bg-light);
    border-bottom: 1px solid #2f2f2f;
    font-weight: 600;
  }
  .chat-box {
    flex: 1;
    overflow-y: auto;
    padding: 18px;
    display: flex;
    flex-direction: column;
    gap: 12px;
  }
  .msg {
    padding: 12px 16px;
    border-radius: 14px;
    max-width: 85%;
    line-height: 1.5;
    word-wrap: break-word;
    opacity: 0;
    transform: translateY(10px);
    animation: fadeSlideIn 0.4s ease forwards;
  }
  .user { align-self: flex-end; background: var(--bubble-user); color: #000; }
  .bot { align-self: flex-start; background: var(--bubble-bot); color: var(--text-light); }
  .input-area {
    display: flex; align-items: center; justify-content: center;
    gap: 10px; background: var(--bg-light); padding: 12px;
    border-top: 1px solid #2f2f2f;
  }
  input[type="text"] {
    flex: 1; background: transparent; color: var(--text-light);
    border: 1px solid #3d3d3d; padding: 12px 16px;
    border-radius: 9999px; outline: none; font-size: 15px;
  }
  .upload-label, button {
    width: 48px; height: 48px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 22px; cursor: pointer; border: none;
    transition: transform .2s ease; flex-shrink: 0;
  }
  .upload-label { background: #2b2b2b; color: #fff; }
  button { background: radial-gradient(circle, #fff 0%, #dcdcdc 100%); color: #000; }
  button:hover, .upload-label:hover { transform: scale(1.08); }
  .img-preview {
    width: 100%; max-width: 230px; border-radius: 12px; margin-bottom: 10px; display: block;
  }
  @keyframes fadeSlideIn { from {opacity: 0; transform: translateY(10px);} to {opacity: 1; transform: translateY(0);} }
  .typing { display: inline-flex; align-items: center; gap: 4px; }
  .dot { width: 6px; height: 6px; background: #fff; border-radius: 50%; animation: blink 1.4s infinite; }
  .dot:nth-child(2) { animation-delay: 0.2s; }
  .dot:nth-child(3) { animation-delay: 0.4s; }
  @keyframes blink { 0%, 80%, 100% { opacity: 0.2; } 40% { opacity: 1; } }
</style>
</head>
<body>
<header>Satria Developer ğŸ’»</header>

<div id="chatBox" class="chat-box">
  <div class="bot msg">Halo! Saya <b>Satria AI</b>. Silahkan ajukan pertanyaan.</div>
</div>

<div class="input-area">
  <label class="upload-label" title="Upload gambar">ï¼‹
    <input type="file" id="imgInput" accept="image/*" style="display:none;">
  </label>
  <input type="text" id="userInput" placeholder="Ketik pertanyaanmu...">
  <button id="sendBtn" title="Kirim pesan">â®•</button>
</div>

<script>
const chatBox = document.getElementById("chatBox");
const sendBtn = document.getElementById("sendBtn");
const userInput = document.getElementById("userInput");
const imgInput = document.getElementById("imgInput");

function addMessage(text, sender, imgSrc = null) {
  const msg = document.createElement("div");
  msg.className = sender + " msg";
  if (imgSrc) {
    const img = document.createElement("img");
    img.src = imgSrc;
    img.className = "img-preview";
    msg.appendChild(img);
  }
  const textNode = document.createElement("div");
  textNode.innerHTML = text;
  msg.appendChild(textNode);
  chatBox.appendChild(msg);
  chatBox.scrollTop = chatBox.scrollHeight;
  return msg;
}

function addTypingIndicator() {
  const msg = document.createElement("div");
  msg.className = "bot msg";
  msg.innerHTML = `<div class="typing"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>`;
  chatBox.appendChild(msg);
  chatBox.scrollTop = chatBox.scrollHeight;
  return msg;
}

function typeWriterEffect(element, text, speed = 25) {
  element.textContent = "";
  let i = 0;
  const interval = setInterval(() => {
    if (i < text.length) {
      element.textContent += text.charAt(i);
      i++;
      chatBox.scrollTop = chatBox.scrollHeight;
    } else clearInterval(interval);
  }, speed);
}

imgInput.addEventListener("change", e => {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = () => addMessage("ğŸ“¸ Gambar diunggah:", "user", reader.result);
    reader.readAsDataURL(file);
  }
});

async function sendMessage() {
  const text = userInput.value.trim();
  if (!text) return;
  addMessage(text, "user");
  userInput.value = "";

  const typingMsg = addTypingIndicator();
  const lower = text.toLowerCase();

  // === Perintah khusus tetap dipertahankan ===
  if (lower === "/start") {
    typingMsg.remove();
    addMessage(`
      <img src="https://files.catbox.moe/js5h5b.jpg" class="img-preview">
      â•­â”ğ“Šˆ SATRIA CRASHER ğ™„ğ™‰ğ™ğ™Šğ™ğ™ˆğ˜¼ğ™ğ™„ğ™Šğ™‰ ğ“Š‰â”â•â•£<br>
      â•‘ğ™±ğ™¾ğšƒ ğ™½ğ™°ğ™¼ğ™´ : SATRIA-CRASHER<br>
      â”ƒğš…ğ™´ğšğš‚ğ™¸ğ™¾ğ™½ : 1.0<br>
      â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â•â•£<br>
      â•­â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br>
      â”ƒğ™³ğ™´ğš…ğ™´ğ™»ğ™¾ğ™¿ğ™´ğš >> Satria developer<br>
      â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br>
      â•­â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br>
      â”ƒ/android-crash<br>
      â”ƒ/iphone-crash<br>
      â”ƒ/ios-crash<br>
      â”ƒ/infinty-delay<br>
      â”ƒ/crash1<br>
      â”ƒ/crash2<br>
      â”ƒ/forclose<br>
      â”ƒ/buldozer<br>
      â”ƒ/forclose-delay<br>
      â”ƒ/invisible-crash<br>
      â”ƒ/info-developer<br>
      â”ƒ/addreseller<br>
      â•°â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”<br>
      â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€<br>
      â”‚[ By : Satria developer]<br>
      â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    `, "bot");
    return;
  }

  if (lower.includes("/info-developer")) {
    typingMsg.remove();
    const botMsg = addMessage("", "bot");
    typeWriterEffect(botMsg, "Pembuat AI ini adalah Satria Developer. Contact: +6285591577100 ğŸ“");
    return;
  }

  // === Panggil Proxy API (Vercel) ===
  try {
    const res = await fetch("/api/chat", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ contents: [{ parts: [{ text }] }] })
    });

    const data = await res.json();
    typingMsg.remove();

    const answer = data?.candidates?.[0]?.content?.parts?.[0]?.text || "âš ï¸ Tidak ada jawaban dari API.";
    const botMsg = addMessage("", "bot");
    typeWriterEffect(botMsg, answer, 20);

  } catch (err) {
    typingMsg.remove();
    addMessage("âŒ Gagal menghubungi API: " + err.message, "bot");
  }
}

sendBtn.addEventListener("click", sendMessage);
userInput.addEventListener("keypress", e => { if (e.key === "Enter") sendMessage(); });
</script>
</body>
</html>ï¿¼Enter    display: flex; align-items: center; justify-content: center;
    gap: 10px; background: var(--bg-light); padding: 12px;
    border-top: 1px solid #2f2f2f;
  }
  input[type="text"] {
    flex: 1; background: transparent; color: var(--text-light);
    border: 1px solid #3d3d3d; padding: 12px 16px;
    border-radius: 9999px; outline: none; font-size: 15px;
  }
  .upload-label, button {
    width: 48px; height: 48px; border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 22px; cursor: pointer; border: none;
    transition: transform .2s ease; flex-shrink: 0;
  }
  .upload-label { background: #2b2b2b; color: #fff; }
  button { background: radial-gradient(circle, #fff 0%, #dcdcdc 100%); color: #000; }
  button:hover, .upload-label:hover { transform: scale(1.08); }
  .img-preview {
    width: 100%; max-width: 230px; border-radius: 12px; margin-bottom: 10px; display: block;
  }
  @keyframes fadeSlideIn { from {opacity: 0; transform: translateY(10px);} to {opacity: 1; transform: translateY(0);} }
  .typing { display: inline-flex; align-items: center; gap: 4px; }
  .dot { width: 6px; height: 6px; background: #fff; border-radius: 50%; animation: blink 1.4s infinite; }
  .dot:nth-child(2) { animation-delay: 0.2s; }
  .dot:nth-child(3) { animation-delay: 0.4s; }
  @keyframes blink { 0%, 80%, 100% { opacity: 0.2; } 40% { opacity: 1; } }
</style>
</head>
<body>
<header>Satria Developer ğŸ’»</header>

<div id="chatBox" class="chat-box">
  <div class="bot msg">Halo! Saya <b>Satria AI</b>. Silahkan ajukan pertanyaan.</div>
</div>

<div class="input-area">
  <label class="upload-label" title="Upload gambar">ï¼‹
    <input type="file" id="imgInput" accept="image/*" style="display:none;">
  </label>
  <input type="text" id="userInput" placeholder="Ketik pertanyaanmu...">
  <button id="sendBtn" title="Kirim pesan">â®•</button>
</div>

<script>
const chatBox = document.getElementById("chatBox");
const sendBtn = document.getElementById("sendBtn");
const userInput = document.getElementById("userInput");
const imgInput = document.getElementById("imgInput");

function addMessage(text, sender, imgSrc = null) {
  const msg = document.createElement("div");
  msg.className = sender + " msg";
  if (imgSrc) {
    const img = document.createElement("img");
    img.src = imgSrc;
    img.className = "img-preview";
g.appendChild(img);
  }
  const textNode = document.createElement("div");
  textNode.innerHTML = text;
  msg.appendChild(textNode);
  chatBox.appendChild(msg);
  chatBox.scrollTop = chatBox.scrollHeight;
  return msg;
}

function addTypingIndicator() {
  const msg = document.createElement("div");
  msg.className = "bot msg";
  msg.innerHTML = `<div class="typing"><div class="dot"></div><div class="dot"></div><div class="dot"></div></div>`;
  chatBox.appendChild(msg);
  chatBox.scrollTop = chatBox.scrollHeight;
  return msg;
}

function typeWriterEffect(element, text, speed = 25) {
  element.textContent = "";
  let i = 0;
  const interval = setInterval(() => {
    if (i < text.length) {
      element.textContent += text.charAt(i);
      i++;
      chatBox.scrollTop = chatBox.scrollHeight;
    } else clearInterval(interval);
  }, speed);
}

imgInput.addEventListener("change", e => {
  const file = e.target.files[0];
  if (file) {
    const reader = new FileReader();
    reader.onload = () => addMessage("ğŸ“¸ Gambar diunggah:", "user", reader.result);
    reader.readAsDataURL(file);
  }
});

async function sendMessage() {
  const text = userInput.value.trim();
  if (!text) return;
  addMessage(text, "user");
  userInput.value = "";

  const typingMsg = addTypingIndicator();
  const lower = text.toLowerCase();

  // === Perintah khusus tetap dipertahankan ===
  if (lower === "/start") {
    typingMsg.remove();
    addMessage(`
      <img src="https://files.catbox.moe/js5h5b.jpg" class="img-preview">
      â•­â”ğ“Šˆ SATRIA CRASHER ğ™„ğ™‰ğ™ğ™Šğ™ğ™ˆğ˜¼ğ™ğ™„ğ™Šğ™‰ ğ“Š‰â”â•â•£<br>
      â•‘ğ™±ğ™¾ğšƒ ğ™½ğ™°ğ™¼ğ™´ : SATRIA-CRASHER<br>
      â”ƒğš…ğ™´ğšğš‚ğ™¸ğ™¾ğ™½ : 1.0<br>
